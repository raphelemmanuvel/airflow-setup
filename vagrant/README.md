# Vagrant

- Setting up three node kubernetes cluster using Vagrant

## Install Vagrant

 - https://www.vagrantup.com/

git clone and cd into root dir

## Install vagrant vbguest plugin
```bash
  vagrant plugin install vagrant-vbguest vagrant-scp
```

## Starts and provision the vagrant environment
```bash
  vagrant up
```

## Check Vagrant status
```bash
  vagrant status
```

## Log into master node
```bash
  vagrant ssh master
```

## Check nodes
```bash
  kubectl get nodes
```

## To reload workers
```bash
  vagrant reload worker-1
```

## Run rancher Docker Image
```bash
  docker run -d —restart=unless-stopped -p 80:80 -p 443:443 —name rancher rancher/rancher:v2.3.2
```

## Log into rancher from localhost, set a password

## Get Master NODE IP address by running ifconfig after ssh into master and provide in the dialogue box for node url

Ip address = net ipv4_address netstat.*

 - From Rancher : Import an existing cluster -> Provide Cluster Name -> Copy the curl command generated by Rancher and run it in the master node

 - Wait till Rancher imports the Kubernetes Cluster

## Stop and delete all traces of the vagrant machine
```bash
  vagrant destroy
```
